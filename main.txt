class 意識{
    virtual ベクトル 応答(ベクトル 入力)
    virtual ベクトル 応答(ベクトル 入力,string 名前)
}

class 人の小意識:意識{
    ベクトル 内部状態
    ベクトル 反応係数
    virtual 状態更新(ベクトル 入力)
    virtual 状態更新(ベクトル 入力,人の小意識[] 小意識集合)
    override ベクトル 応答(ベクトル 入力){
        var rtn = ベクトル*反応係数
        状態更新(入力)
        return rtn
    }
}

class 人の意識:意識{
    人の小意識[] 小意識集合
    実数[] 意識適応係数
    
    (string 名前,実数[] 意識適応係数)[] 意識適応係数集合

    virtual 状態更新(ベクトル 入力)

    override ベクトル 応答(ベクトル 入力,string 名前){
        意識適応係数 = 意識適応係数集合.Where(x=>x.名前==名前);
        応答(入力)
    }

    override ベクトル 応答(ベクトル 入力){
        var rtn=小意識集合.Zip(意識適応係数,(小意識,係数)=>(小意識,係数))
                    .Select(x=>x.小意識.応答(入力)*係数)
                    .Sum()
        状態更新(入力)
        return rtn;
    }
}
